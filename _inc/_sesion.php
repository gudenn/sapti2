<?php
  global $SYSTEM_NAME,$SESSION_TIME;
  $SYSTEM_NAME  = 'PROYECTOFINAL';
  $SESSION_TIME = 60*60; //

/**
 * Inicia la session
 */
function initSession($login, $passwd) {
  global $SYSTEM_NAME,$SESSION_TIME;
  leerClase("Usuario");
  $user = new Usuario();
  $user = $user->issetUser($login, $passwd);
  if ($user) {
    saveObject($user, "$SYSTEM_NAME-USER");
    setcookie("$SYSTEM_NAME-USER", $login, time() + $SESSION_TIME, '/');
    return true;
  }
  else
    return false;
}

/**
 * Pregunta si hay session
 */
function isUserSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(!isset($_SESSION))
    session_start();
  if ( !isset($_COOKIE["$SYSTEM_NAME-USER"]) )
  {
    closeSession();
    return 0;
  }

  // renovamos en tiempo de la session pq hay actividad del usuario
  $login = $_COOKIE["$SYSTEM_NAME-USER"];
  setcookie("$SYSTEM_NAME-USER", $login, time() + $SESSION_TIME, '/');

  return isset($_SESSION["$SYSTEM_NAME-USER"]) ? 1 : 0;
}


/**
 * Lee el objeto incompleto de la session
 */
function getSessionUser() {
  global $SYSTEM_NAME;
  if (isUserSession()) {
    return loadObject("$SYSTEM_NAME-USER");
  }
  else {
    return 0;
  }
}

/**
 * Guarda el objeto en la session
 */
function saveObject($object, $name) {
  $_SESSION[$name] = serialize($object);
}

/**
 * Lee cualquier objeto
 */
function loadObject($name) {
  if (!isset($_SESSION[$name])) return "EMPTY";
  return unserialize($_SESSION[$name]);
}

/**
 * cierra la session
 * @global type $SESSION_TIME
 */
function closeSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(isset($_SESSION)) {
    setcookie("$SYSTEM_NAME-USER", "" , 1 - ($SESSION_TIME * 2), '/');
    unset($_SESSION["$SYSTEM_NAME-USER"]);
  }
}

 /**
 * obtiene el ip
 */
function getIP() {
  if (getenv("HTTP_X_FORWARDED_FOR"))
    return getenv("HTTP_X_FORWARDED_FOR");
  return getenv("REMOTE_ADDR");
}


/*///////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////

       URGENTE REVISAR Y ELIMINAR TODAS LAS FUNCIONES DE ABAJO!!!
       REmplazar por las correspondientes de arriba!!
       y tambien agregar a cada usuario PERTENECE al crearlo!

 ________________________________________________________________________/\\\________/\\\____/\\\\\\\\\_________/\\\\\\\\\\\\__/\\\\\\\\\\\\\\\__/\\\\\_____/\\\__/\\\\\\\\\\\\\\\__/\\\\\\\\\\\\\\\______________/\\\\\\\\\______/\\\\\\\\\\\\\\\__/\\\________/\\\__/\\\\\\\\\\\_____/\\\\\\\\\\\_______/\\\\\\\\\_______/\\\\\\\\\________________/\\\________/\\\____________/\\\\\\\\\\\\\\\__/\\\______________/\\\\\\\\\\\__/\\\\____________/\\\\__/\\\\\\\\\\\__/\\\\\_____/\\\_____/\\\\\\\\\_______/\\\\\\\\\________________/\\\\\\\\\\\\\\\_______/\\\\\_______/\\\\\\\\\\\\________/\\\\\\\\\________/\\\\\\\\\\\______________/\\\_________________/\\\\\\\\\________/\\\\\\\\\\\______________/\\\\\\\\\\\\\\\__/\\\________/\\\__/\\\\\_____/\\\________/\\\\\\\\\__/\\\\\\\\\\\_______/\\\\\_______/\\\\\_____/\\\__/\\\\\\\\\\\\\\\_____/\\\\\\\\\\\______________/\\\\\\\\\\\\_____/\\\\\\\\\\\\\\\_______________/\\\\\\\\\_____/\\\\\\\\\\\\\_______/\\\\\\\\\_________/\\\\\\\\\\\_______/\\\\\__________/\\\________/\\\________/\\\____        
  _______________________________________________________________________\/\\\_______\/\\\__/\\\///////\\\_____/\\\//////////__\/\\\///////////__\/\\\\\\___\/\\\_\///////\\\/////__\/\\\///////////_____________/\\\///////\\\___\/\\\///////////__\/\\\_______\/\\\_\/////\\\///____/\\\/////////\\\___/\\\\\\\\\\\\\___/\\\///////\\\_____________\///\\\____/\\\/____________\/\\\///////////__\/\\\_____________\/////\\\///__\/\\\\\\________/\\\\\\_\/////\\\///__\/\\\\\\___\/\\\___/\\\\\\\\\\\\\___/\\\///////\\\_____________\///////\\\/////______/\\\///\\\____\/\\\////////\\\____/\\\\\\\\\\\\\____/\\\/////////\\\___________\/\\\_______________/\\\\\\\\\\\\\____/\\\/////////\\\___________\/\\\///////////__\/\\\_______\/\\\_\/\\\\\\___\/\\\_____/\\\////////__\/////\\\///______/\\\///\\\____\/\\\\\\___\/\\\_\/\\\///////////____/\\\/////////\\\___________\/\\\////////\\\__\/\\\///////////______________/\\\\\\\\\\\\\__\/\\\/////////\\\___/\\\\\\\\\\\\\______\/////\\\///______/\\\///\\\______/\\\\\\\____/\\\\\\\____/\\\\\\\__       
   _______________________________________________________________________\/\\\_______\/\\\_\/\\\_____\/\\\____/\\\_____________\/\\\_____________\/\\\/\\\__\/\\\_______\/\\\_______\/\\\_______________________\/\\\_____\/\\\___\/\\\_____________\//\\\______/\\\______\/\\\______\//\\\______\///___/\\\/////////\\\_\/\\\_____\/\\\_______________\///\\\/\\\/______________\/\\\_____________\/\\\_________________\/\\\_____\/\\\//\\\____/\\\//\\\_____\/\\\_____\/\\\/\\\__\/\\\__/\\\/////////\\\_\/\\\_____\/\\\___________________\/\\\_________/\\\/__\///\\\__\/\\\______\//\\\__/\\\/////////\\\__\//\\\______\///____________\/\\\______________/\\\/////////\\\__\//\\\______\///____________\/\\\_____________\/\\\_______\/\\\_\/\\\/\\\__\/\\\___/\\\/_______________\/\\\_______/\\\/__\///\\\__\/\\\/\\\__\/\\\_\/\\\______________\//\\\______\///____________\/\\\______\//\\\_\/\\\________________________/\\\/////////\\\_\/\\\_______\/\\\__/\\\/////////\\\_________\/\\\_______/\\\/__\///\\\___/\\\\\\\\\__/\\\\\\\\\__/\\\\\\\\\_      
    _______________________________________________________________________\/\\\_______\/\\\_\/\\\\\\\\\\\/____\/\\\____/\\\\\\\_\/\\\\\\\\\\\_____\/\\\//\\\_\/\\\_______\/\\\_______\/\\\\\\\\\\\_______________\/\\\\\\\\\\\/____\/\\\\\\\\\\\______\//\\\____/\\\_______\/\\\_______\////\\\_________\/\\\_______\/\\\_\/\\\\\\\\\\\/__________________\///\\\/________________\/\\\\\\\\\\\_____\/\\\_________________\/\\\_____\/\\\\///\\\/\\\/_\/\\\_____\/\\\_____\/\\\//\\\_\/\\\_\/\\\_______\/\\\_\/\\\\\\\\\\\/____________________\/\\\________/\\\______\//\\\_\/\\\_______\/\\\_\/\\\_______\/\\\___\////\\\___________________\/\\\_____________\/\\\_______\/\\\___\////\\\___________________\/\\\\\\\\\\\_____\/\\\_______\/\\\_\/\\\//\\\_\/\\\__/\\\_________________\/\\\______/\\\______\//\\\_\/\\\//\\\_\/\\\_\/\\\\\\\\\\\_______\////\\\___________________\/\\\_______\/\\\_\/\\\\\\\\\\\_______________\/\\\_______\/\\\_\/\\\\\\\\\\\\\\__\/\\\_______\/\\\_________\/\\\______/\\\______\//\\\_\//\\\\\\\__\//\\\\\\\__\//\\\\\\\__     
     _______________________________________________________________________\/\\\_______\/\\\_\/\\\//////\\\____\/\\\___\/////\\\_\/\\\///////______\/\\\\//\\\\/\\\_______\/\\\_______\/\\\///////________________\/\\\//////\\\____\/\\\///////________\//\\\__/\\\________\/\\\__________\////\\\______\/\\\\\\\\\\\\\\\_\/\\\//////\\\____________________\/\\\_________________\/\\\///////______\/\\\_________________\/\\\_____\/\\\__\///\\\/___\/\\\_____\/\\\_____\/\\\\//\\\\/\\\_\/\\\\\\\\\\\\\\\_\/\\\//////\\\____________________\/\\\_______\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\\\\\\\\\\\\\______\////\\\________________\/\\\_____________\/\\\\\\\\\\\\\\\______\////\\\________________\/\\\///////______\/\\\_______\/\\\_\/\\\\//\\\\/\\\_\/\\\_________________\/\\\_____\/\\\_______\/\\\_\/\\\\//\\\\/\\\_\/\\\///////___________\////\\\________________\/\\\_______\/\\\_\/\\\///////________________\/\\\\\\\\\\\\\\\_\/\\\/////////\\\_\/\\\\\\\\\\\\\\\_________\/\\\_____\/\\\_______\/\\\__\//\\\\\____\//\\\\\____\//\\\\\___    
      _______________________________________________________________________\/\\\_______\/\\\_\/\\\____\//\\\___\/\\\_______\/\\\_\/\\\_____________\/\\\_\//\\\/\\\_______\/\\\_______\/\\\_______________________\/\\\____\//\\\___\/\\\________________\//\\\/\\\_________\/\\\_____________\////\\\___\/\\\/////////\\\_\/\\\____\//\\\___________________\/\\\_________________\/\\\_____________\/\\\_________________\/\\\_____\/\\\____\///_____\/\\\_____\/\\\_____\/\\\_\//\\\/\\\_\/\\\/////////\\\_\/\\\____\//\\\___________________\/\\\_______\//\\\______/\\\__\/\\\_______\/\\\_\/\\\/////////\\\_________\////\\\_____________\/\\\_____________\/\\\/////////\\\_________\////\\\_____________\/\\\_____________\/\\\_______\/\\\_\/\\\_\//\\\/\\\_\//\\\________________\/\\\_____\//\\\______/\\\__\/\\\_\//\\\/\\\_\/\\\_____________________\////\\\_____________\/\\\_______\/\\\_\/\\\_______________________\/\\\/////////\\\_\/\\\_______\/\\\_\/\\\/////////\\\_________\/\\\_____\//\\\______/\\\____\//\\\______\//\\\______\//\\\____   
       _______________________________________________________________________\//\\\______/\\\__\/\\\_____\//\\\__\/\\\_______\/\\\_\/\\\_____________\/\\\__\//\\\\\\_______\/\\\_______\/\\\_______________________\/\\\_____\//\\\__\/\\\_________________\//\\\\\__________\/\\\______/\\\______\//\\\__\/\\\_______\/\\\_\/\\\_____\//\\\__________________\/\\\_________________\/\\\_____________\/\\\_________________\/\\\_____\/\\\_____________\/\\\_____\/\\\_____\/\\\__\//\\\\\\_\/\\\_______\/\\\_\/\\\_____\//\\\__________________\/\\\________\///\\\__/\\\____\/\\\_______/\\\__\/\\\_______\/\\\__/\\\______\//\\\____________\/\\\_____________\/\\\_______\/\\\__/\\\______\//\\\____________\/\\\_____________\//\\\______/\\\__\/\\\__\//\\\\\\__\///\\\______________\/\\\______\///\\\__/\\\____\/\\\__\//\\\\\\_\/\\\______________/\\\______\//\\\____________\/\\\_______/\\\__\/\\\_______________________\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\_______\/\\\__/\\\___\/\\\______\///\\\__/\\\_______\///________\///________\///_____  
        ________________________________________________________________________\///\\\\\\\\\/___\/\\\______\//\\\_\//\\\\\\\\\\\\/__\/\\\\\\\\\\\\\\\_\/\\\___\//\\\\\_______\/\\\_______\/\\\\\\\\\\\\\\\___________\/\\\______\//\\\_\/\\\\\\\\\\\\\\\______\//\\\________/\\\\\\\\\\\_\///\\\\\\\\\\\/___\/\\\_______\/\\\_\/\\\______\//\\\_________________\/\\\_________________\/\\\\\\\\\\\\\\\_\/\\\\\\\\\\\\\\\__/\\\\\\\\\\\_\/\\\_____________\/\\\__/\\\\\\\\\\\_\/\\\___\//\\\\\_\/\\\_______\/\\\_\/\\\______\//\\\_________________\/\\\__________\///\\\\\/_____\/\\\\\\\\\\\\/___\/\\\_______\/\\\_\///\\\\\\\\\\\/_____________\/\\\\\\\\\\\\\\\_\/\\\_______\/\\\_\///\\\\\\\\\\\/_____________\/\\\______________\///\\\\\\\\\/___\/\\\___\//\\\\\____\////\\\\\\\\\__/\\\\\\\\\\\____\///\\\\\/_____\/\\\___\//\\\\\_\/\\\\\\\\\\\\\\\_\///\\\\\\\\\\\/_____________\/\\\\\\\\\\\\/___\/\\\\\\\\\\\\\\\___________\/\\\_______\/\\\_\/\\\\\\\\\\\\\/__\/\\\_______\/\\\_\//\\\\\\\\\_________\///\\\\\/_________/\\\________/\\\________/\\\____ 
         __________________________________________________________________________\/////////_____\///________\///___\////////////____\///////////////__\///_____\/////________\///________\///////////////____________\///________\///__\///////////////________\///________\///////////____\///////////_____\///________\///__\///________\///__________________\///__________________\///////////////__\///////////////__\///////////__\///______________\///__\///////////__\///_____\/////__\///________\///__\///________\///__________________\///_____________\/////_______\////////////_____\///________\///____\///////////_______________\///////////////__\///________\///____\///////////_______________\///_________________\/////////_____\///_____\/////________\/////////__\///////////_______\/////_______\///_____\/////__\///////////////____\///////////_______________\////////////_____\///////////////____________\///________\///__\/////////////____\///________\///___\/////////____________\/////__________\///________\///________\///_____
 __________________________________________________________________________/\\\\\\\\\______/\\\\\\\\\\\\\\\____________________________________/\\\\\\_____________________________________________________________________________________________________________________________/\\\\\\________________________________________________________________________________________________________________________________________________________________________________/\\\_________________________________________________________________________________________________/\\\_____________________________________________________________________________/\\\___________________________/\\\________/\\\____                                                                                                                                                                                                                                                                                                                                                     
  ________________________________________________________________________/\\\///////\\\___\/\\\///////////____________________________________\////\\\____________________________________________________________________________________________________________________________\////\\\_______________________________________________________________________________________________________________________________________________________________________________\/\\\________________________________________________________________________________________________\/\\\____________________________________________________________________________\/\\\_________________________/\\\\\\\____/\\\\\\\__                                                                                                                                                                                                                                                                                                                                                    
   _______________________________________________________________________\/\\\_____\/\\\___\/\\\___________________________________/\\\\\\\\\_____\/\\\__________________________________________________________________________/\\\\\\\\\___________________________________________\/\\\________________________________________________________________________________________________________________________________/\\\\\\\\\_____________________________________\/\\\___/\\\__________________________________/\\\___________________________________________________\/\\\_______________________________________________________________________/\\\_\/\\\________________________/\\\\\\\\\__/\\\\\\\\\_                                                                                                                                                                                                                                                                                                                                                   
    _______________________________________________________________________\/\\\\\\\\\\\/____\/\\\\\\\\\\\________/\\\\\__/\\\\\____/\\\/////\\\____\/\\\_____/\\\\\\\\\_____/\\\\\\\\\\\__/\\\\\\\\\_____/\\/\\\\\\\_____________/\\\/////\\\_____/\\\\\_____/\\/\\\\\\\_______________\/\\\_____/\\\\\\\\\_____/\\\\\\\\\\_______________/\\\\\\\\_____/\\\\\_____/\\/\\\\\\\___/\\/\\\\\\\______/\\\\\\\\___/\\\\\\\\\\__/\\\/////\\\_____/\\\\\_____/\\/\\\\\\__________\/\\\__\///______/\\\\\\\\___/\\/\\\\\\____/\\\\\\\\\\\_____/\\\\\\\\___/\\\\\\\\\\__________________\/\\\______/\\\\\\\\_____________/\\\\\\\\\_____/\\/\\\\\\\___/\\/\\\\\\\__\///__\/\\\_________/\\\\\\\\\____\//\\\\\\\__\//\\\\\\\__                                                                                                                                                                                                                                                                                                                                                  
     _______________________________________________________________________\/\\\//////\\\____\/\\\///////_______/\\\///\\\\\///\\\_\/\\\\\\\\\\_____\/\\\____\////////\\\___\///////\\\/__\////////\\\___\/\\\/////\\\___________\/\\\\\\\\\\____/\\\///\\\__\/\\\/////\\\______________\/\\\____\////////\\\___\/\\\//////______________/\\\//////____/\\\///\\\__\/\\\/////\\\_\/\\\/////\\\___/\\\/////\\\_\/\\\//////__\/\\\\\\\\\\____/\\\///\\\__\/\\\////\\\____/\\\\\\\\\___/\\\___/\\\/////\\\_\/\\\////\\\__\////\\\////____/\\\/////\\\_\/\\\//////______________/\\\\\\\\\____/\\\/////\\\___________\////////\\\___\/\\\/////\\\_\/\\\/////\\\__/\\\_\/\\\\\\\\\__\////////\\\____\//\\\\\____\//\\\\\___                                                                                                                                                                                                                                                                                                                                                 
      _______________________________________________________________________\/\\\____\//\\\___\/\\\_____________\/\\\_\//\\\__\/\\\_\/\\\//////______\/\\\______/\\\\\\\\\\_______/\\\/______/\\\\\\\\\\__\/\\\___\///____________\/\\\//////____/\\\__\//\\\_\/\\\___\///_______________\/\\\______/\\\\\\\\\\__\/\\\\\\\\\\____________/\\\__________/\\\__\//\\\_\/\\\___\///__\/\\\___\///___/\\\\\\\\\\\__\/\\\\\\\\\\_\/\\\//////____/\\\__\//\\\_\/\\\__\//\\\__/\\\////\\\__\/\\\__/\\\\\\\\\\\__\/\\\__\//\\\____\/\\\_______/\\\\\\\\\\\__\/\\\\\\\\\\____________/\\\////\\\___/\\\\\\\\\\\______________/\\\\\\\\\\__\/\\\___\///__\/\\\___\///__\/\\\_\/\\\////\\\___/\\\\\\\\\\____\//\\\______\//\\\____                                                                                                                                                                                                                                                                                                                                                
       _______________________________________________________________________\/\\\_____\//\\\__\/\\\_____________\/\\\__\/\\\__\/\\\_\/\\\____________\/\\\_____/\\\/////\\\_____/\\\/_______/\\\/////\\\__\/\\\___________________\/\\\_________\//\\\__/\\\__\/\\\______________________\/\\\_____/\\\/////\\\__\////////\\\___________\//\\\________\//\\\__/\\\__\/\\\_________\/\\\_________\//\\///////___\////////\\\_\/\\\_________\//\\\__/\\\__\/\\\___\/\\\_\/\\\__\/\\\__\/\\\_\//\\///////___\/\\\___\/\\\____\/\\\_/\\__\//\\///////___\////////\\\___________\/\\\__\/\\\__\//\\///////______________/\\\/////\\\__\/\\\_________\/\\\_________\/\\\_\/\\\__\/\\\__/\\\/////\\\_____\///________\///_____                                                                                                                                                                                                                                                                                                                                               
        _______________________________________________________________________\/\\\______\//\\\_\/\\\\\\\\\\\\\\\_\/\\\__\/\\\__\/\\\_\/\\\__________/\\\\\\\\\_\//\\\\\\\\/\\__/\\\\\\\\\\\_\//\\\\\\\\/\\_\/\\\___________________\/\\\__________\///\\\\\/___\/\\\____________________/\\\\\\\\\_\//\\\\\\\\/\\__/\\\\\\\\\\____________\///\\\\\\\\__\///\\\\\/___\/\\\_________\/\\\__________\//\\\\\\\\\\__/\\\\\\\\\\_\/\\\__________\///\\\\\/___\/\\\___\/\\\_\//\\\\\\\/\\_\/\\\__\//\\\\\\\\\\_\/\\\___\/\\\____\//\\\\\____\//\\\\\\\\\\__/\\\\\\\\\\___________\//\\\\\\\/\\__\//\\\\\\\\\\___________\//\\\\\\\\/\\_\/\\\_________\/\\\_________\/\\\_\/\\\\\\\\\__\//\\\\\\\\/\\_____/\\\________/\\\____                                                                                                                                                                                                                                                                                                                                              
         _______________________________________________________________________\///________\///__\///////////////__\///___\///___\///__\///__________\/////////___\////////\//__\///////////___\////////\//__\///____________________\///_____________\/////_____\///____________________\/////////___\////////\//__\//////////_______________\////////_____\/////_____\///__________\///____________\//////////__\//////////__\///_____________\/////_____\///____\///___\///////\//__\///____\//////////__\///____\///______\/////______\//////////__\//////////_____________\///////\//____\//////////_____________\////////\//__\///__________\///__________\///__\/////////____\////////\//_____\///________\///_____                                                                                                                                                                                                                                                                                                                                             
 _________________________________________________________________________________________________________________________________________________/\\\________________________________________________________________________________________________________________________________________________________________________________________________________________________________/\\\________________________________________________________________________________________________________________________________/\\\\\\\\\\\\\____/\\\\\\\\\\\\\\\____/\\\\\\\\\______/\\\\\\\\\\\\\\\__/\\\\\\\\\\\\\\\__/\\\\\_____/\\\__/\\\\\\\\\\\\\\\________/\\\\\\\\\__/\\\\\\\\\\\\\\\___________________________/\\\\\\_______________________________________________________________________________________/\\\\\\______________________/\\\____                                                                                                                                                                                                                 
  ________________________________________________________________________________________________________________________________________________\/\\\_______________________________________________________________________________________________________________________________________________________________________________________________________________________________\/\\\_______________________________________________________________________________________________________________________________\/\\\/////////\\\_\/\\\///////////___/\\\///////\\\___\///////\\\/////__\/\\\///////////__\/\\\\\\___\/\\\_\/\\\///////////______/\\\////////__\/\\\///////////___________________________\////\\\______________________________________________________________________________________\////\\\____________________/\\\\\\\__                                                                                                                                                                                                                
   __________________________________________________________________________/\\\__/\\\_______________/\\\_________________________________________\/\\\_________/\\\_________________________________________________________/\\\\\\\\_________________________________/\\\\\\\\______________________________________________________________________________________________________\/\\\__________________________________________________________________________________________________/\\\_________________________\/\\\_______\/\\\_\/\\\_____________\/\\\_____\/\\\_________\/\\\_______\/\\\_____________\/\\\/\\\__\/\\\_\/\\\_______________/\\\/___________\/\\\_________________________________________\/\\\_________________________________________________________________________________________\/\\\___________________/\\\\\\\\\_                                                                                                                                                                                                               
    _________________________________________________________________________\//\\\/\\\_____________/\\\\\\\\\\\__/\\\\\\\\\_______/\\\\\__/\\\\\___\/\\\________\///______/\\\\\\\\___/\\/\\\\\\______________/\\\\\\\\\_____/\\\////\\\__/\\/\\\\\\\______/\\\\\\\\___/\\\////\\\__/\\\\\\\\\_____/\\/\\\\\\\_____________/\\\\\\\\\__________________/\\\\\\\\__/\\\\\\\\\___________\/\\\___/\\\\\\\\\_______________/\\\____/\\\__/\\\\\\\\\\__/\\\____/\\\__/\\\\\\\\\_____/\\/\\\\\\\__\///______/\\\\\______________\/\\\\\\\\\\\\\/__\/\\\\\\\\\\\_____\/\\\\\\\\\\\/__________\/\\\_______\/\\\\\\\\\\\_____\/\\\//\\\_\/\\\_\/\\\\\\\\\\\______/\\\_____________\/\\\\\\\\\\\________________/\\\\\\\\\_______\/\\\__________________/\\\\\\\\__/\\/\\\\\\\______/\\\\\\\\___/\\\\\\\\\_____/\\/\\\\\\\_____\/\\\________/\\\\\____\//\\\\\\\__                                                                                                                                                                                                              
     __________________________________________________________________________\//\\\\\_____________\////\\\////__\////////\\\____/\\\///\\\\\///\\\_\/\\\\\\\\\___/\\\___/\\\/////\\\_\/\\\////\\\____________\////////\\\___\//\\\\\\\\\_\/\\\/////\\\___/\\\/////\\\_\//\\\\\\\\\_\////////\\\___\/\\\/////\\\___________\////////\\\_______________/\\\//////__\////////\\\_____/\\\\\\\\\__\////////\\\_____________\/\\\___\/\\\_\/\\\//////__\/\\\___\/\\\_\////////\\\___\/\\\/////\\\__/\\\___/\\\///\\\____________\/\\\/////////____\/\\\///////______\/\\\//////\\\__________\/\\\_______\/\\\///////______\/\\\\//\\\\/\\\_\/\\\///////______\/\\\_____________\/\\\///////________________\////////\\\______\/\\\________________/\\\//////__\/\\\/////\\\___/\\\/////\\\_\////////\\\___\/\\\/////\\\____\/\\\______/\\\///\\\___\//\\\\\___                                                                                                                                                                                                             
      ___________________________________________________________________________\//\\\_________________\/\\\________/\\\\\\\\\\__\/\\\_\//\\\__\/\\\_\/\\\////\\\_\/\\\__/\\\\\\\\\\\__\/\\\__\//\\\_____________/\\\\\\\\\\___\///////\\\_\/\\\___\///___/\\\\\\\\\\\___\///////\\\___/\\\\\\\\\\__\/\\\___\///______________/\\\\\\\\\\_____________/\\\___________/\\\\\\\\\\___/\\\////\\\____/\\\\\\\\\\____________\/\\\___\/\\\_\/\\\\\\\\\\_\/\\\___\/\\\___/\\\\\\\\\\__\/\\\___\///__\/\\\__/\\\__\//\\\___________\/\\\_____________\/\\\_____________\/\\\____\//\\\_________\/\\\_______\/\\\_____________\/\\\_\//\\\/\\\_\/\\\_____________\//\\\____________\/\\\_________________________/\\\\\\\\\\_____\/\\\_______________/\\\_________\/\\\___\///___/\\\\\\\\\\\____/\\\\\\\\\\__\/\\\___\///_____\/\\\_____/\\\__\//\\\___\//\\\____                                                                                                                                                                                                            
       ________________________________________________________________________/\\_/\\\__________________\/\\\_/\\___/\\\/////\\\__\/\\\__\/\\\__\/\\\_\/\\\__\/\\\_\/\\\_\//\\///////___\/\\\___\/\\\____________/\\\/////\\\___/\\_____\\\_\/\\\_________\//\\///////____/\\_____\\\__/\\\/////\\\__\/\\\____________________/\\\/////\\\____________\//\\\_________/\\\/////\\\__\/\\\__\/\\\___/\\\/////\\\____________\/\\\___\/\\\_\////////\\\_\/\\\___\/\\\__/\\\/////\\\__\/\\\_________\/\\\_\//\\\__/\\\____________\/\\\_____________\/\\\_____________\/\\\_____\//\\\________\/\\\_______\/\\\_____________\/\\\__\//\\\\\\_\/\\\______________\///\\\__________\/\\\________________________/\\\/////\\\_____\/\\\______________\//\\\________\/\\\_________\//\\///////____/\\\/////\\\__\/\\\____________\/\\\____\//\\\__/\\\_____\///_____                                                                                                                                                                                                           
        _______________________________________________________________________\//\\\\/___________________\//\\\\\___\//\\\\\\\\/\\_\/\\\__\/\\\__\/\\\_\/\\\\\\\\\__\/\\\__\//\\\\\\\\\\_\/\\\___\/\\\___________\//\\\\\\\\/\\_\//\\\\\\\\__\/\\\__________\//\\\\\\\\\\_\//\\\\\\\\__\//\\\\\\\\/\\_\/\\\___________________\//\\\\\\\\/\\____________\///\\\\\\\\_\//\\\\\\\\/\\_\//\\\\\\\/\\_\//\\\\\\\\/\\___________\//\\\\\\\\\___/\\\\\\\\\\_\//\\\\\\\\\__\//\\\\\\\\/\\_\/\\\_________\/\\\__\///\\\\\/_____________\/\\\_____________\/\\\\\\\\\\\\\\\_\/\\\______\//\\\_______\/\\\_______\/\\\\\\\\\\\\\\\_\/\\\___\//\\\\\_\/\\\\\\\\\\\\\\\____\////\\\\\\\\\_\/\\\\\\\\\\\\\\\___________\//\\\\\\\\/\\__/\\\\\\\\\____________\///\\\\\\\\_\/\\\__________\//\\\\\\\\\\_\//\\\\\\\\/\\_\/\\\__________/\\\\\\\\\__\///\\\\\/_______/\\\____                                                                                                                                                                                                          
         ________________________________________________________________________\////______________________\/////_____\////////\//__\///___\///___\///__\/////////___\///____\//////////__\///____\///_____________\////////\//___\////////___\///____________\//////////___\////////____\////////\//__\///_____________________\////////\//_______________\////////___\////////\//___\///////\//___\////////\//_____________\/////////___\//////////___\/////////____\////////\//__\///__________\///_____\/////_______________\///______________\///////////////__\///________\///________\///________\///////////////__\///_____\/////__\///////////////________\/////////__\///////////////_____________\////////\//__\/////////_______________\////////__\///____________\//////////___\////////\//__\///__________\/////////_____\/////________\///_____                                                                                                                                                                                                         



 (. )(. )
  )   (
(  v   ) 
                                 ,cccc,,,
                              ,P"`.`."`.ch$.
                             .P`.`.`.`.`.`;`h
                            j'.`.`.`.`.`.`.?3?
                            $`.`.`.`.`.`.`.`?$.
                          ,P`.`.`.`.`.`.,$$,.3$h.
                        ,P`.`.`.`.`.`.,$$$$$i.`$$h
                      ,P".`.`.`.`.`.,$$$$$$$$$hJ$$$.
                    c"`.`.`.`.`.,$$$$$$$$$$$$$$$$$$$
                  J"`.`.`.`.`.;J$$$$$$$$$$$$$$$$$$$$h
                J"`.`.`.`.`.,;$$$$$$$$$?????iiJJJJJJ$$$$$cc,
              J"`.`.`.`.`.`;???????iiJJJJ$$$$$$$$$$$$$$$$$$$$h
            ,?`.`.`.`.`.`;;J$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$c
          ,P`.`.`.`.`.`.;;P"$F?$$$$$$$$$?$$"?$I"?C?$$$$$$$$$$$$$h
         J".`.`.`.`.`.,;;$ j"J$?"""?$C`.??";;J?$'?L$$$$$$$$$$$$$$>
       ,P.`.`.`.`.`.`,;;$'J3F'J$??$3c$`.`?h$9hP"`.$<?$$$$$$$$$$$$'
      J"`.`.`.`.`.`.,;9'$ P3`.`.""`.`3`.`.`.`.`.`.3?$ $?$$$$$$$$P
     J'.`.`.`.`.`.`;;J$,/j'$`.`.`.`.`$`.`.`.`.`.`.3F<? "',_?$$$$    _,,="
    P.`.`.`.`.`.`.;;J'$$ $ ?`.`.`.`.$"`.`.`.`.`.`.3h ?     `"?$C,c$P"
   P`.`.`.`.`.`.,;;9' $$ F  h.`.`.`."?".".`.`.`.`.$$  h=-,_     `?c
 ,$.`.`.`.`.`.`;;;J' ,'$j' <$.`.`.`.`.`.`.`.`.`.`.$j   ?c  ".     `$"??hcc?
;C;.`.`.`.`.`;;;;J'$$h;$J  `Ph`.`.`,JllllCCc`.`.`.PjL    "=c,`=c,   "h.
$;;.`.`.`.`,;;;;P   Jh?$J   L$`.`.`?hiiii?".`.`.`.Fj''       ??  ?.   ?c
C;;,`.`.`.;;;;9"   $"  $J   $'h.`.`.`.`.`.`.`.`.`JFJ  $C      $   ,>h, `?c,_
C;;;;;;;;;;;;$    <Lc,jP$   $ ?h`.`.`.`.`.`.`.`J$$ $  $ ?cc,  ?.,P""=c,c=""
C;;;;;;;;;;;?$    <C,'j'$   $  $?h,.`.`.`.`,J??;$F $  $    $ ""$ . ,=-cc"""
$;;;;;;;;;;;;?h.  <$F $ $   $  $;;;;?TTTT??;;;;;P  F  $  > $  .`h "c`h.
$;;;;;;;;;;;;;9h?$C$ J',P   F  $h;;;;;;;;;;;;;;9> j'c $  > ?  `h`h `"c`h.
$;;;;;;;;;;;;;;h;;;$ $ $ \  F  $$;;;;;;;;;;;;;;9' 3 $ $  h `h  $ ?c"h.3?=,_
`h;;;;;;;;;;;;;$;;;$j'<$ `h.F  F<C;;;;;;;;;;;;;J> $ $ $  $ `h   $ $Pc,`"?$h.
 $;;;;;;;;;;;;;??;;P$ $F  h,F  F,c;;;;;;;;;;;;;$> $ $ $  $  C    ?c?c  "???"
 `h;;;;;;;;;;;;;;;9FF<$   h,F j'J;;;;;;;;;;;;;$ h $ $ ?. $  $   `h`?`h
  ?;;;;;;;;;;;;;;;$<F$$   F,F $,c;;;;;;;;;`;;J'J3 $ $ `h ?  $h   `h`h.`.
   $;;;;;;;;;;;;;;FJj'$  .F  Jl$;;;;;;;;;;;;$.P.`,? ?  h `h <$?   ?h `$C3hc
    $;;;;;;;;;;;;J $$ $  J'  $ $;;;;;;;;;'J"3" $,'? ?. $  $  $'L   $"',"","
     "i;;;;;;;;;;$j'$ $  $  J',C;;`;;;ii?3$'J $ $ `L`h `h ?. `h'L  .?,_
      `i;;;;;;;;;$$$L ?',F .P $.`.`.j??$cc,' J' F  $ $  $  ?   $ ?c`-,,h.
       ?;;;;;;;;;;;$$?c$F  P J'.`.`.`.`.`P" ,F `F  ? `h `h  h   $  ???
       `C;;;;;;;;;;;$>    / J'`.`.`.`.`.??3FJF  $   L $  `h `h  c$$.
        $;;;;;;;;;;;$,?,-<c$`.`.`.`.`.`.`.`$F$c `h  `h_$  `L  $???"`$
        $;;;;;;;;;;;'"$ $?$.`.`.`.`.`.`.`.`?`.`?$$.    `?c,$$,`L`.`.`h
        $;;;;;;;;;;`.?LP'`?.`.`.`.`.`.`.`.`.`.`.`.`?c,    $$F.`.`.`.`3
        <h;;;;;;;;`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.?$?cJ;,.`.`.`.`3>
        <C;;;;;;;.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.;;;.`.`.`.`3'
        <C;C;;;;`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.;;;,`.`.`.`J
        <C9C;;;;`.c???i.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`;;;;;`.`.`.`$
        <C9;;;;.`$;ii;?h`.`.`.`,;;;.`.`.`.`.`.`.`.`.`.`.`J;;;;`.`.`.`F
        <;9;;;;.<C?b9h;P`.`.`.,;3;;.`.`.`.`.`.`.`.`.`.`.`?;;;;`.`.`.j'
        <29h;;;;`$;;;;$.`.`.`;;;$;;.`.`.`.`.`.`.`.`.`.`.`.L;;;`.`.`.$
        `C;h;;;;`.?ii?`.`.,;;;;J?;`.`.`.`.`.`.`.`j???hc.`.h;;.`.`.`;P
         $;9h;;;;;`.`.`.;;;;;;I?;;`.;;;,`.`.`.`.jF;$?h?h`.$;;.`.`.`F
         $;;?i;;;;;;;;;;;;;;;J?;;.`;;;;;;;`.`.`.?C?bi$;$`.$;;.`.`.$
         3;;;;$i;;;;;;;;;;;J?;;;`.`.;;h;;;;;`.`.`?i;;;J'`.$;;.`.`J'
         `C;;;;??hiiiiiiJ??;;;;.`.`.;;?h;;;;;;`.`.`"""`.`;P;;.`.`F
          h;;;;;;;;;;;;;;;;;`.`.`.`.`.;;$i;;;;;;;;`.`;;;;J;;;.`.j'
          $;;;;.`.`.`.`.`.`.`.`.`.`.`.`;;;$i;;;;;;;;;;;;$;;;`.`.3
          <;;;;.`.`.`.`.`.`.`.`.`.`.`.`.;;;;?$iijjjjii$?;;;;`.`.3
          `C;;`.`.`.`.`.`.`.`.`.`.`.`.`.`.`;;;;;;;;;;$;;;;;;`.`.J
           $;;`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`;;;;;;;;C;;;;;.`.`.$
           ?;.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`;;;;;9;;;;;;.`.`.3
           `h.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`;;;$;;;;;`.`.`.3
            h.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.;;$;;;;;`.`.`.3
            ?.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`;?C;;;;`.`.`.3
            `h`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`$;;;;`.`.`.?,
             $`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.h;;.`.`.`.`$
             ?,.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.?h;.`.`.`.`.h
              $.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`?h;`.`.`.`.`h
              `h`.`.`.`.`.`.`.`.`.`;;.`.`.`.`.`.`.`.`.`.`h;,`.`.`.`.h
               $`.`.`.`.`.`.`.`.`.`;;.`.`.`.`.`.`.`.`.`.`.$;;.`.`.`.`L
               ?`.`.`.`.`.`.`.`.`.`;;.`.`.`.`.`.`.`.`.`.`.`?i;`.`.`.`?,
               `h.`.`.`.`.`.`.`.`.`;;.`.`.`.`.`.`.`.`.`.`.`.`h;,`.`.`.?.
                h.`.`.`.`.`.`.`.`.`t$h`.`.`.`.`.`.`.`.`.`.`.``h;;.`.`.`?
                $.`.`.`.`.`.`.`.`.`3$$`.`.`.`.`.`.`.`.`.`.`.`.`h;;;.`.`.h
                $.`.`.`.`.`.`.`.`.`."'`.`.`.`.`.`.`.`.`.`.`.`.`.$;;;;.`.`h
                $.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`?;;;;`.`.h
                ?,`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.$;;;;.`.`$.
                `h`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`?;;;;`.`.?.
                 $`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`,c=""'"""`.`.`.`?
                 $`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`/".`.`.`.`.`.`.`.`3
                 $`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`/".`.,c$h`.`.`.`.`.`3
                 F`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.$c,=="`.`"h.`.`.`.`.`3
                ;F`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`$?.`.`.`.`P
                $.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.z?`.`.`.`.j'
               .F.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.,cP"`.`.`.`.`.$
               ;F.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.,,c=="`.`.`.,,c.`.`j'
               3`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.("`.`.`.`.,c="`.`.`.`$
               ?`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`=ccc????"`.`.,,=.`.`F
               `h.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.("`.`.`_,,c=$F`.`;`.$'
                h;`.`.`.`.`.`.`.`.`.`L`.`.`.`.`,;;;;i.`"""""`.`.,=".`.J'`.$>
                $;,.`.`.`.`.`.`.`.`.`.h;;;;;;;;;;;;;$.`.`.`.`,,='.`.,?$.`J'h
                `C;.`.`.`.`.`.`.`.`.`.`$;;;;;;;;;;;;F.`.`.,r".`,,=""'J'.3F`$
                 $;;`.`.`.`.`.`.`.`.`.`.?i;;;;;;;;;$`.`.`.?,c=".`.`.`P`,F.`$
                 `h;;.`.`.`.`.`.`.`.`.`.`.h;;;;;;;J'`.`.`.`.`.`.`.`.3.`P`.`F
                  h;;;`.`.`.`.`.`.`.`.`.`.`?;;;;;;F.`.`.`.`.`.`.`.`.?,J.`.;F
                  ?;;;;.`.`.`.`.`.`.`.`.`.`.?;;;;$`.`.`.`.`.`.`.`.`.`.`.`.3'
                  `h;;;;`.`.`.`.`.`.`.`.`.`.`$;;$.`.`.`.`.`.`.`.`.`.`.`.`.$
                   ?;;;;`.`.`.`.`.`.`.`.`.`.`."$'.`.`.`.`.`.`.`.`.`.`.`.`.$
                   `C;;;;.`.`.`.`.`.`.`.`.`.`.`?i.`.`.`.`.`.`.`.`.`.`.`.`.P
                    ?;;;;;`.`.`.`.`.`.`.`.`.`.`.?;`.`.`.`.`.`.`.`.`.`.`.`j'
                    `C;;;;,.`.`.`.`.`.`.`.`.`.`.`?;.`.`.`.`.`.`.`.`.`.`.`$
                     ?;;;;;;`.`.`.`.`.`.`.`.`.`.`.?;`.`.`.`.`.`.`.`.`.`.`$
/////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////*/


/**
 * Inicia la session
 */
function initAdminSession($login, $passwd) {
  global $SYSTEM_NAME,$SESSION_TIME;
  leerClase("Administrador");
  $admin = new Administrador();
  $admin = $admin->issetAdmin($login, $passwd);
  if ($admin) {
    saveObject($admin, "$SYSTEM_NAME-ADMIN");
    setcookie("$SYSTEM_NAME-ADMIN", $login, time() + $SESSION_TIME, '/');
    return true;
  }
  else
    return false;
}

/**
 * Inicia la session del estudiante
 */
function initEstudianteSession($login, $passwd) {
  global $SYSTEM_NAME,$SESSION_TIME;
  leerClase("Estudiante");
  $estudiante = new Estudiante();
  $estudiante = $estudiante->issetEstudiante($login, $passwd);
  if ($estudiante) {
    saveObject($estudiante, "$SYSTEM_NAME-ESTUDIANTE");
    setcookie("$SYSTEM_NAME-ESTUDIANTE", $login, time() + $SESSION_TIME, '/');
    return true;
  }
  else
    return false;
}

/**
 * Inicia la session del consejo
 */
function initConsejoSession($login, $passwd) {
  global $SYSTEM_NAME,$SESSION_TIME;
  leerClase("Consejo");
  $consejo = new Consejo();
  $consejo = $consejo->issetConsejo($login, $passwd);
  if ($consejo) {
    saveObject($consejo, "$SYSTEM_NAME-CONSEJO");
    setcookie("$SYSTEM_NAME-CONSEJO", $login, time() + $SESSION_TIME, '/');
    return true;
  }
  else
    return false;
}



/**
 * Inicia la session del docente
 */
function initDocenteSession($login, $passwd) {
  global $SYSTEM_NAME,$SESSION_TIME;
  leerClase("Docente");
  $docente = new Docente();
  $docente = $docente->issetDocente($login, $passwd);
  if ($docente) {
    saveObject($docente, "$SYSTEM_NAME-DOCENTE");
    setcookie("$SYSTEM_NAME-DOCENTE", $login, time() + $SESSION_TIME, '/');
    return true;
  }
  else
    return false;
}
/**
 * Inicia la session del tutor
 */
function initTutorSession($login, $passwd) {
  global $SYSTEM_NAME,$SESSION_TIME;
  leerClase("Tutor");
  $tutor = new Tutor();
  $tutor = $tutor->issetTutor($login, $passwd);
  if ($tutor) {
    saveObject($tutor, "$SYSTEM_NAME-TUTOR");
    setcookie("$SYSTEM_NAME-TUTOR", $login, time() + $SESSION_TIME, '/');
    return true;
  }
  else
    return false;
}






/**
 * Verifica si tenemos una session activa del Administrador
 * @global string $SYSTEM_NAME
 * @global type $SESSION_TIME
 * @return int
 */
function isAdminSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(!isset($_SESSION))
    session_start();
  if ( !isset($_COOKIE["$SYSTEM_NAME-ADMIN"]) )
  {
    closeAdminSession();
    return 0;
  }
  // renovamos en tiempo de la session pq hay actividad del usuario
  $login = $_COOKIE["$SYSTEM_NAME-ADMIN"];
  setcookie("$SYSTEM_NAME-ADMIN", $login, time() + $SESSION_TIME, '/');

  return isset($_SESSION["$SYSTEM_NAME-ADMIN"]) ? 1 : 0;
}

/**
 * Verifica si tenemos una session activa del Estudiante
 * @global string $SYSTEM_NAME
 * @global type $SESSION_TIME
 * @return int
 */
function isEstudianteSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(!isset($_SESSION))
    session_start();
  if ( !isset($_COOKIE["$SYSTEM_NAME-ESTUDIANTE"]) )
  {
    closeEstudianteSession();
    return 0;
  }
  // renovamos en tiempo de la session pq hay actividad del usuario
  $login = $_COOKIE["$SYSTEM_NAME-ESTUDIANTE"];
  setcookie("$SYSTEM_NAME-ESTUDIANTE", $login, time() + $SESSION_TIME, '/');

  return isset($_SESSION["$SYSTEM_NAME-ESTUDIANTE"]) ? 1 : 0;
}


function isConsejoSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(!isset($_SESSION))
    session_start();
  if ( !isset($_COOKIE["$SYSTEM_NAME-CONSEJO"]) )
  {
    closeConsejoSession();
    return 0;
  }
  // renovamos en tiempo de la session pq hay actividad del usuario
  $login = $_COOKIE["$SYSTEM_NAME-CONSEJO"];
  setcookie("$SYSTEM_NAME-CONSEJO", $login, time() + $SESSION_TIME, '/');

  return isset($_SESSION["$SYSTEM_NAME-CONSEJO"]) ? 1 : 0;
}

function closeConsejoSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(isset($_SESSION)) {
    setcookie("$SYSTEM_NAME-CONSEJO", "" , 1 - ($SESSION_TIME * 2), '/');
    unset($_SESSION["$SYSTEM_NAME-CONSEJO"]);
  }
}



function isDocenteSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(!isset($_SESSION))
    session_start();
  if ( !isset($_COOKIE["$SYSTEM_NAME-DOCENTE"]) )
  {
    closeDocenteSession();
    return 0;
  }
  // renovamos en tiempo de la session pq hay actividad del usuario
  $login = $_COOKIE["$SYSTEM_NAME-DOCENTE"];
  setcookie("$SYSTEM_NAME-DOCENTE", $login, time() + $SESSION_TIME, '/');

  return isset($_SESSION["$SYSTEM_NAME-DOCENTE"]) ? 1 : 0;
}

function isTutorSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(!isset($_SESSION))
    session_start();
  if ( !isset($_COOKIE["$SYSTEM_NAME-TUTOR"]) )
  {
    closeTutorSession();
    return 0;
  }
  // renovamos en tiempo de la session pq hay actividad del usuario
  $login = $_COOKIE["$SYSTEM_NAME-TUTOR"];
  setcookie("$SYSTEM_NAME-TUTOR", $login, time() + $SESSION_TIME, '/');

  return isset($_SESSION["$SYSTEM_NAME-TUTOR"]) ? 1 : 0;
}



function getSessionAdmin() {
  global $SYSTEM_NAME;
  if (isAdminSession()) {
    return loadObject("$SYSTEM_NAME-ADMIN");
  }
  else {
    return 0;
  }
}

function getSessionEstudiante() {
  global $SYSTEM_NAME;
  if (isEstudianteSession()) {
    return loadObject("$SYSTEM_NAME-ESTUDIANTE");
  }
  else {
    return 0;
  }
}

function getSessionDocente() {
  global $SYSTEM_NAME;
  if (isDocenteSession()) {
    return loadObject("$SYSTEM_NAME-DOCENTE");
  }
  else {
    return 0;
  }
}

function getSessionTutor() {
  global $SYSTEM_NAME;
  if (isTutorSession()) {
    return loadObject("$SYSTEM_NAME-TUTOR");
  }
  else {
    return 0;
  }
}




/**
 * Cierra la sesion del Administrador
 * @global string $SYSTEM_NAME
 * @global type $SESSION_TIME
 */
function closeAdminSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(isset($_SESSION)) {
    setcookie("$SYSTEM_NAME-ADMIN", "" , 1 - ($SESSION_TIME * 2), '/');
    unset($_SESSION["$SYSTEM_NAME-ADMIN"]);
  }
}

/**
 * Cierra la sesion del estudiante
 * @global string $SYSTEM_NAME
 * @global type $SESSION_TIME
 */
function closeEstudianteSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(isset($_SESSION)) {
    setcookie("$SYSTEM_NAME-ESTUDIANTE", "" , 1 - ($SESSION_TIME * 2), '/');
    unset($_SESSION["$SYSTEM_NAME-ESTUDIANTE"]);
  }
}

/**
 * Cierra la sesion del docente
 * @global string $SYSTEM_NAME
 * @global type $SESSION_TIME
 */

function closeDocenteSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(isset($_SESSION)) {
    setcookie("$SYSTEM_NAME-DOCENTE", "" , 1 - ($SESSION_TIME * 2), '/');
    unset($_SESSION["$SYSTEM_NAME-DOCENTE"]);
  }
}


function closeTutorSession() {
  global $SYSTEM_NAME,$SESSION_TIME;
  if(isset($_SESSION)) {
    setcookie("$SYSTEM_NAME-TUTOR", "" , 1 - ($SESSION_TIME * 2), '/');
    unset($_SESSION["$SYSTEM_NAME-TUTOR"]);
  }
}



?>